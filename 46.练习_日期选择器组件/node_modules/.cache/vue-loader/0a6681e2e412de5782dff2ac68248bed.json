{"remainingRequest":"D:\\node\\nvm\\v14.15.4\\node_global\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lenovo\\Desktop\\exercise\\46.练习_日期选择器组件\\DatePicker.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\exercise\\46.练习_日期选择器组件\\DatePicker.vue","mtime":1612881213648},{"path":"D:\\node\\nvm\\v14.15.4\\node_global\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\node\\nvm\\v14.15.4\\node_global\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\node\\nvm\\v14.15.4\\node_global\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGlyZWN0aXZlczp7DQogICAgICAgICdjbGljay1vdXRzaWRlJzogew0KICAgICAgICAgICAgYmluZChlbCxiaW5kaW5nLHZub2RlKXsNCiAgICAgICAgICAgICAgICBjb25zdCB2bSA9IHZub2RlLmNvbnRleHQ7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQub25jbGljayA9IGZ1bmN0aW9uIChlKXsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9tID0gZS50YXJnZXQ7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRWxTb24gPSBlbC5jb250YWlucyhkb20pOw0KICAgICAgICAgICAgICAgICAgICBpZihpc0VsU29uICYmICF2bS5zaG93UGFuZWwpew0KICAgICAgICAgICAgICAgICAgICAgICAgdm0uY2hhbmdlU2hvd1BhbmVsKHRydWUpDQogICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCFpc0VsU29uICYmIHZtLnNob3dQYW5lbCl7DQogICAgICAgICAgICAgICAgICAgICAgICB2bS5jaGFuZ2VTaG93UGFuZWwoZmFsc2UpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIHByb3BzOnsNCiAgICAgICAgZGF0ZTp7DQogICAgICAgICAgICB0eXBlOiBEYXRlLA0KICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gbmV3IERhdGUoKQ0KICAgICAgICB9DQogICAgfSwNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBzaG93UGFuZWw6IGZhbHNlLA0KICAgICAgICAgICAgc2hvd0RhdGU6IHsNCiAgICAgICAgICAgICAgICB5ZWFyOiAwLA0KICAgICAgICAgICAgICAgIG1vbnRoOiAwLA0KICAgICAgICAgICAgICAgIGRhdGU6IDAsDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGNob29zZURhdGUoKXsNCiAgICAgICAgICAgIGNvbnN0IHllYXIgPSB0aGlzLmRhdGUuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gdGhpcy5kYXRlLmdldE1vbnRoKCk7DQogICAgICAgICAgICBjb25zdCBkYXkgPSB0aGlzLmRhdGUuZ2V0RGF0ZSgpOw0KICAgICAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGgrMX0tJHtkYXl9YA0KICAgICAgICB9LA0KICAgICAgICBzaG93RGF5KCl7DQogICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoLCB9ID0gdGhpcy5zaG93RGF0ZTsNCiAgICAgICAgICAgIGxldCBhcnIgPSBbXTsNCiAgICAgICAgICAgIGxldCBmaXJzdERhdGUgPSBuZXcgRGF0ZSh5ZWFyLG1vbnRoLDEpOw0KICAgICAgICAgICAgbGV0IHdlZWsgPSBmaXJzdERhdGUuZ2V0RGF5KCk7DQogICAgICAgICAgICBsZXQgc3RhcnREYXRlID0gbmV3IERhdGUoZmlyc3REYXRlIC0gd2VlayAqIDEwMDAgKiA2MCAqIDYwICogMjQpOw0KICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDQyOyBpKyspew0KICAgICAgICAgICAgICAgIGFyci5wdXNoKG5ldyBEYXRlKCtzdGFydERhdGUgKyBpICogMTAwMCAqIDYwICogNjAgKiAyNCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGFycjsNCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICAgIA0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBnZXRTaG93RGF0ZShEYXRlKXsNCiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGgsIGRheTpkYXRlIH0gPSB0aGlzLmdldFllYXJNb250aERhdGUoRGF0ZSk7DQogICAgICAgICAgICB0aGlzLnNob3dEYXRlID0gew0KICAgICAgICAgICAgICAgIHllYXIsDQogICAgICAgICAgICAgICAgbW9udGgsDQogICAgICAgICAgICAgICAgZGF0ZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBnZXRZZWFyTW9udGhEYXRlKGRhdGUpew0KICAgICAgICAgICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpOw0KICAgICAgICAgICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIHllYXIsDQogICAgICAgICAgICAgICAgbW9udGgsDQogICAgICAgICAgICAgICAgZGF5DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGlzQ3VyKGRhdGUpew0KICAgICAgICAgICAgY29uc3QgY2hvb3NlRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY2hvb3NlRGF0ZSk7DQogICAgICAgICAgICBjb25zdCB7IHllYXI6c2hvd1llYXIsIG1vbnRoOnNob3dNb250aH0gPSB0aGlzLnNob3dEYXRlDQogICAgICAgICAgICBjb25zdCB7IHllYXI6Y2hvb3NlWWVhciwgbW9udGg6Y2hvb3NlTW9udGgsIGRheTpjaG9vc2VEYXl9ID0gdGhpcy5nZXRZZWFyTW9udGhEYXRlKGNob29zZURhdGUpDQogICAgICAgICAgICBjb25zdCB7IHllYXIsIG1vbnRoLCBkYXl9ID0gdGhpcy5nZXRZZWFyTW9udGhEYXRlKGRhdGUpOw0KICAgICAgICAgICAgY29uc3QgeyB5ZWFyOmN1clllYXIsIG1vbnRoOmN1ck1vbnRoLCBkYXk6Y3VyRGF5fSA9IHRoaXMuZ2V0WWVhck1vbnRoRGF0ZShuZXcgRGF0ZSgpKQ0KDQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIG1vbnRoOiB5ZWFyPT09c2hvd1llYXIgJiYgbW9udGg9PT1zaG93TW9udGgsDQogICAgICAgICAgICAgICAgdG9kYXk6IHllYXI9PT1jdXJZZWFyICYmIG1vbnRoPT09Y3VyTW9udGggJiYgZGF5PT09Y3VyRGF5LA0KICAgICAgICAgICAgICAgIHNlbGVjdDogeWVhcj09PWNob29zZVllYXIgJiYgbW9udGg9PT1jaG9vc2VNb250aCAmJiBkYXk9PT1jaG9vc2VEYXksDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgfSwNCiAgICAgICAgb25DaG9vc2VEYXRlKGRhdGUpew0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnY2hvb3NlLWRhdGUnLGRhdGUpOw0KICAgICAgICAgICAgdGhpcy5jaGFuZ2VTaG93UGFuZWwoZmFsc2UpOw0KICAgICAgICAgICAgdGhpcy5nZXRTaG93RGF0ZShuZXcgRGF0ZSgpKQ0KICAgICAgICB9LA0KICAgICAgICBjaGFuZ2VTaG93UGFuZWwoc3RhdGUpew0KICAgICAgICAgICAgdGhpcy5zaG93UGFuZWwgPSBzdGF0ZTsNCiAgICAgICAgfSwNCiAgICAgICAgb25DaGFuZ2VNb250aCh0eXBlKXsNCiAgICAgICAgICAgIGNvbnN0IHsgeWVhciwgbW9udGgsIGRhdGV9ID0gdGhpcy5zaG93RGF0ZTsNCiAgICAgICAgICAgIGNvbnN0IG1vdmVNb250aCA9IHR5cGUgPT09ICdwcmV2JyA/IC0xIDogKzE7DQogICAgICAgICAgICBjb25zdCBzaG93RGF0ZSA9IG5ldyBEYXRlKHllYXIsbW9udGgsZGF0ZSk7DQogICAgICAgICAgICBzaG93RGF0ZS5zZXRNb250aChtb250aCttb3ZlTW9udGgpOw0KICAgICAgICAgICAgY29uc3QgeyB5ZWFyOnNob3dZZWFyLCBtb250aDpzaG93TW9udGh9ID0gdGhpcy5nZXRZZWFyTW9udGhEYXRlKHNob3dEYXRlKTsNCiAgICAgICAgICAgIHRoaXMuc2hvd0RhdGUueWVhciA9IHNob3dZZWFyOw0KICAgICAgICAgICAgdGhpcy5zaG93RGF0ZS5tb250aCA9IHNob3dNb250aDsNCiAgICAgICAgfSwNCiAgICAgICAgb25DaGFuZ2VZZWFyKHR5cGUpew0KICAgICAgICAgICAgY29uc3QgbW92ZVllYXIgPSB0eXBlID09PSAncHJldicgPyAtMSA6IDE7DQogICAgICAgICAgICB0aGlzLnNob3dEYXRlLnllYXIgKz0gbW92ZVllYXI7DQogICAgICAgIH0NCiAgICB9LA0KICAgIGNyZWF0ZWQoKXsNCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRlKTsNCiAgICAgICAgdGhpcy5nZXRTaG93RGF0ZSh0aGlzLmRhdGUpOw0KICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmdldFllYXJNb250aERhdGUobmV3IERhdGUoJzIwMjEtMS05JykpKQ0KICAgIH0NCiAgICANCn0NCg=="},{"version":3,"sources":["DatePicker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"DatePicker.vue","sourceRoot":".","sourcesContent":["<template>\r\n    <div class=\"date-picker\" v-click-outside>\r\n        <div class=\"picker-input\">\r\n            <span class=\"input-prefix\">\r\n                <i class=\"iconfont icon-date\" />\r\n            </span>\r\n            <input type=\"text\" :value=\"chooseDate\">\r\n        </div>\r\n        <div class=\"picker-panel\" v-if=\"showPanel\">\r\n            <div class=\"picker-arrow\"> </div>\r\n            <div class=\"picker-body\">\r\n                <div class=\"picker-header\">\r\n                    <span class=\"picker-btn iconfont icon-prev-year\" @click=\"onChangeYear('prev')\" />\r\n                    <span class=\"picker-btn iconfont icon-prev-month\" @click=\"onChangeMonth('prev')\" />\r\n                    <span class=\"picker-date\">{{ showDate.year }}年{{ showDate.month+1 }}</span>\r\n                    <span class=\"picker-btn iconfont icon-next-month\" @click=\"onChangeMonth('next')\" />\r\n                    <span class=\"picker-btn iconfont icon-next-year\" @click=\"onChangeYear('next')\" />\r\n                </div>\r\n                <div class=\"picker-content\">\r\n                    <div class=\"picker-weeks\">\r\n                        <div v-for=\"week in ['日','一','二','三','四','五','六']\" :key=\"week\">{{ week }}</div>\r\n                    </div>\r\n                    <div class=\"picker-days\">\r\n                        <div \r\n                            v-for=\"date in showDay\" \r\n                            :key=\"date.getTime()\"\r\n                            :class=\"{\r\n                                'other-month': !isCur(date).month,\r\n                                'is-select': isCur(date).select,\r\n                                'is-today': isCur(date).today,\r\n                            }\"\r\n                            @click=\"onChooseDate(date)\"\r\n                        >{{ date.getDate() }}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    directives:{\r\n        'click-outside': {\r\n            bind(el,binding,vnode){\r\n                const vm = vnode.context;\r\n                document.onclick = function (e){\r\n                    const dom = e.target;\r\n                    const isElSon = el.contains(dom);\r\n                    if(isElSon && !vm.showPanel){\r\n                        vm.changeShowPanel(true)\r\n                    }else if(!isElSon && vm.showPanel){\r\n                        vm.changeShowPanel(false)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    props:{\r\n        date:{\r\n            type: Date,\r\n            default: () => new Date()\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            showPanel: false,\r\n            showDate: {\r\n                year: 0,\r\n                month: 0,\r\n                date: 0,\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        chooseDate(){\r\n            const year = this.date.getFullYear();\r\n            const month = this.date.getMonth();\r\n            const day = this.date.getDate();\r\n            return `${year}-${month+1}-${day}`\r\n        },\r\n        showDay(){\r\n            const { year, month, } = this.showDate;\r\n            let arr = [];\r\n            let firstDate = new Date(year,month,1);\r\n            let week = firstDate.getDay();\r\n            let startDate = new Date(firstDate - week * 1000 * 60 * 60 * 24);\r\n            for(let i = 0; i < 42; i++){\r\n                arr.push(new Date(+startDate + i * 1000 * 60 * 60 * 24));\r\n            }\r\n            return arr;\r\n        },\r\n        \r\n        \r\n    },\r\n    methods: {\r\n        getShowDate(Date){\r\n            const { year, month, day:date } = this.getYearMonthDate(Date);\r\n            this.showDate = {\r\n                year,\r\n                month,\r\n                date\r\n            }\r\n        },\r\n        getYearMonthDate(date){\r\n            const year = date.getFullYear();\r\n            const month = date.getMonth();\r\n            const day = date.getDate();\r\n            return {\r\n                year,\r\n                month,\r\n                day\r\n            }\r\n        },\r\n        isCur(date){\r\n            const chooseDate = new Date(this.chooseDate);\r\n            const { year:showYear, month:showMonth} = this.showDate\r\n            const { year:chooseYear, month:chooseMonth, day:chooseDay} = this.getYearMonthDate(chooseDate)\r\n            const { year, month, day} = this.getYearMonthDate(date);\r\n            const { year:curYear, month:curMonth, day:curDay} = this.getYearMonthDate(new Date())\r\n\r\n            return {\r\n                month: year===showYear && month===showMonth,\r\n                today: year===curYear && month===curMonth && day===curDay,\r\n                select: year===chooseYear && month===chooseMonth && day===chooseDay,\r\n            }\r\n            \r\n        },\r\n        onChooseDate(date){\r\n            this.$emit('choose-date',date);\r\n            this.changeShowPanel(false);\r\n            this.getShowDate(new Date())\r\n        },\r\n        changeShowPanel(state){\r\n            this.showPanel = state;\r\n        },\r\n        onChangeMonth(type){\r\n            const { year, month, date} = this.showDate;\r\n            const moveMonth = type === 'prev' ? -1 : +1;\r\n            const showDate = new Date(year,month,date);\r\n            showDate.setMonth(month+moveMonth);\r\n            const { year:showYear, month:showMonth} = this.getYearMonthDate(showDate);\r\n            this.showDate.year = showYear;\r\n            this.showDate.month = showMonth;\r\n        },\r\n        onChangeYear(type){\r\n            const moveYear = type === 'prev' ? -1 : 1;\r\n            this.showDate.year += moveYear;\r\n        }\r\n    },\r\n    created(){\r\n        // console.log(this.date);\r\n        this.getShowDate(this.date);\r\n        // console.log(this.getYearMonthDate(new Date('2021-1-9')))\r\n    }\r\n    \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    @import './assets/font.css';\r\n\r\n    .date-picker{\r\n        display: inline-block;\r\n    }\r\n\r\n    .picker-input{\r\n        position: relative;\r\n    }\r\n\r\n    .input-prefix{\r\n        position: absolute;\r\n        left: 5px;\r\n        width: 25px;\r\n        height: 100%;\r\n        line-height: 40px;\r\n        text-align: center;\r\n        color: #c0c4cc;\r\n    }\r\n\r\n    .picker-input input{\r\n        height: 40px;\r\n        line-height: 40;\r\n        padding: 0 30px;\r\n        background-color: #fff;\r\n        border: 1px solid #dcdfe6;\r\n        border-radius: 4px;\r\n        outline: none;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .picker-panel{\r\n        position: absolute;\r\n        width: 322px;\r\n        height: 329px;\r\n        margin-top: 5px;\r\n        border: 1px solid #e4e7ed;\r\n        border-radius: 4px;\r\n        box-shadow: 0 2px 12px 0 rgba(0, 0, 0,.1);\r\n        background-color: #fff;\r\n    }\r\n\r\n    .picker-arrow{\r\n        position: absolute;\r\n        top: -12px;\r\n        left: 30px;\r\n        width: 0;\r\n        height: 0;\r\n        border: 6px solid transparent;\r\n        border-bottom-color: #ebeef5;\r\n    }\r\n\r\n    .picker-arrow::after{\r\n        content: '';\r\n        position: absolute;\r\n        left: -6px;\r\n        top: 1px;\r\n        display: block;\r\n        width: 0;\r\n        height: 0;\r\n        border: 6px solid transparent;\r\n        border-bottom-color: #fff;\r\n        border-top-width: 0;\r\n    }\r\n\r\n    .picker-body{}\r\n\r\n    .picker-header{\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding-top: 15px;\r\n        padding-bottom: 10px;\r\n    }\r\n\r\n    .picker-header .picker-btn{\r\n        margin-right: 5px;\r\n        margin-left: 5px;\r\n        font-size: 5px;\r\n        color: #303233;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .picker-header .picker-date{\r\n        margin-left: 60px;\r\n        margin-right: 60px;\r\n        font-size: 14px;\r\n        user-select: none;\r\n    }\r\n\r\n    .picker-panel .picker-content{\r\n        padding: 0 10px 10px 10px;\r\n        color: #606266;\r\n        user-select: none;\r\n    }\r\n\r\n    .picker-panel .picker-weeks{\r\n        display: flex;\r\n        justify-content: space-around;\r\n        height: 40px;\r\n        align-items: center;\r\n        border-bottom: 1px solid #ebeef5;\r\n    }\r\n\r\n    .picker-panel .picker-days{\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: space-around;\r\n    }\r\n\r\n    .picker-panel .picker-days div{\r\n        width: 30px;\r\n        height: 30px;\r\n        line-height: 30px;\r\n        text-align: center;\r\n        margin: 4px 6px;\r\n        font-size: 12px;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .picker-panel .picker-days div:hover{\r\n        color: #409eff;\r\n    }\r\n\r\n    .picker-panel .picker-days div.is-today{\r\n        color: #409eff;\r\n        font-weight: 700;\r\n    }\r\n\r\n    .picker-panel .picker-days div.is-select{\r\n        border-radius: 50%;\r\n        background-color: #409eff;\r\n        color: #fff;\r\n    }\r\n\r\n    .picker-panel .picker-days div.other-month{\r\n        color: #c0c4cc;\r\n    }\r\n\r\n</style>"]}]}